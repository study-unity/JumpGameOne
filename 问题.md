在无限模式下，障碍物以及地面都是随着player的前进自动生成的，如果不对经过的地图进行销毁，会导致物体的数量越来越多，因此需要破坏掉那些看不见的物体。在这里为生成的物体添加了一个额外script，在这个script的OnBecameInvisible()方法里面破坏掉该物体：
``` Csharp
void  OnBecameInvisible()
{
    Destroy(gameObject);
}
```

**障碍物的生成**：
>在生成障碍时，相邻障碍不能太近，同时为了保证一定的随机性，因此在生成每个障碍物时，在一定范围内随机生成它与下一个障碍物的距离，并在对应位置生成下一个障碍物。由于障碍物有3种，因此生成一个随机数（范围为0,1,2），然后选择对应的障碍物进行放置

**道具的生成：**
>在第三关时，道具的生成是采用的取代障碍物的方式，也就是在放置障碍时，以20%的概率将其替换为一个道具。道具的种类以及高度同样有三种，均是通过生成随机的方式来决定。

**第三关地面的生成：**
>由于第三关长度不定，因此，地面为随机生成。首先生成50个砖块，并为砖块添加一个触发器（触发器足够高以保证player一定能够触发）。当Player经过砖块触发触发器时，则在新的位置生成一个新的砖块（该位置为50个砖块后）。

**起跳检测的问题：**
>在使用canJump标志检测其是否能够起跳时，在连续点击两下起跳时，player可能会连续跳两下，因此，我们额外增加了它与地面高度的检测，只有接触地面时，才能够起跳，当他在空中时，则无法起跳。

**Player的运动：**
>因为在第三关时需要动态生成地面，因此，我们保持地面不同，将player以及camera和背景图片放在同一个物体下，让这个物体以对应的速度运动。这个速度在第三关时会以每秒0.1的速度增加，直到达到设定的最高速度。

**道具的使用：**
+ 药瓶：在碰到的时候就会使用，如果在血条未满的情况则会回复一格生命值。
+ 护盾：护盾可以累计三个，按A键释放护盾，将protect标志设置为true，7秒后则更改为false。Player在碰撞障碍时会检测protect标志位，如果为true，则免疫本次伤害，并将protect标志重新设为false。如果在护盾使用时间未结束再次使用护盾，则会更新护盾的开始时间。
+ 减速道具：减速道具可以累计三个，按S键使用减速道具，在使用减速时，会记录当前速度，并将移动速度设置为当前速度的1/1.5，在3秒后恢复到所记录的速度。如果在减速道具使用时间未结束再次使用，则会更新减速道具的开始时间。